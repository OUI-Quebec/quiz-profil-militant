<div class="quiz-container">
  <!-- Header de progression toujours visible sauf sur la page de résultats -->
  @if (!progression().complete) {
  <app-progression-header />
  }

  <!-- Question -->
  @if (!progression().complete && questionActuelle()) {
  <app-question
    [question]="questionActuelle()"
    [peutRetourner]="peutRetourner()"
    (choixEffectue)="repondreQuestion($event)"
    (precedentDemande)="questionPrecedente()"
    (passerDemande)="passerQuestion()"
    (recommencerDemande)="recommencerQuiz()"
  />
  }

  <!-- Résultats -->
  @if (progression().complete && profils().length > 0) {
  <div class="results-block">
    <app-resultats [profils]="profils()" />
  </div>
  }

  <!-- Footer toujours visible -->
  <app-footer />

  <!-- Dialogue de confirmation pour recommencer -->
  <app-dialog-confirmation
    [isVisible]="showDialogRecommencer()"
    titre="Recommencer le quiz"
    message="Es-tu sûr·e de vouloir recommencer le quiz ? Toute ta progression sera perdue."
    texteConfirmer="Recommencer"
    texteAnnuler="Annuler"
    (confirmer)="confirmerRecommencer()"
    (annuler)="annulerRecommencer()"
  />
</div>
